#!/bin/sh

set -euo pipefail


#======================================================================================================================
# Check arguments.
#   1   Group and user name
#   2   Group ID (optional - default is 1000)
#   3   User ID (optional - default is 1000)
#======================================================================================================================

[[ -z "${1-}" ]] && bcg-error "You must provide a name for the user and group." "bcg-adduser"
NAME=${1}

GID=${2:-1000}
UID=${3:-1000}


#======================================================================================================================
# Add a group and user without home directory or password.
#======================================================================================================================

bcg-echo "Adding group and user '${NAME}'..." "bcg-adduser"
addgroup --gid "${GID}" "${NAME}"
adduser --uid "${UID}" --no-create-home --disabled-password --ingroup "${NAME}" "${NAME}"
bcg-done "bcg-adduser"
